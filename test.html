<!DOCTYPE html>
<html>
  <head>
    <title>Grossesse Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment/moment.js"></script>
  </head>
  <body>
    <div id="app">
      <h1>Grossesse Calculator</h1>
      <label for="lastPeriodDate">Date des dernières règles:</label>
      <input type="date" id="lastPeriodDate" v-model="lastPeriodDate">
      <button @click="calculateGrossesse()">Calculer</button>
      <div v-if="grossesseDuration && pourcentageGrossesse">
        <p>Durée totale de la grossesse : {{grossesseDuration}} mois</p>
        <p>Temps écoulé : {{elapsedMonths}} mois, {{elapsedWeeks}} semaines, {{elapsedDays}} jours</p>
        <p>Pourcentage de grossesse écoulé : {{pourcentageGrossesse}}%</p>
      </div>
    </div>
    <script>
      new Vue({
        el: '#app',
        data: {
          lastPeriodDate: '',
          grossesseDuration: '',
          pourcentageGrossesse: '',
          elapsedMonths: '',
          elapsedWeeks: '',
          elapsedDays: ''
        },
        methods: {
          calculateGrossesse() {
            const lastPeriodMoment = moment(this.lastPeriodDate);
            const dueDateMoment = lastPeriodMoment.add(280, 'days');
            const now = moment();
            const grossesseDuration = moment.duration(now.diff(lastPeriodMoment)).asMonths();
            const totalMonths = Math.floor(grossesseDuration);
            const pourcentageGrossesse = Math.round(grossesseDuration / 2.8 * 100);

            const elapsedDays = now.diff(lastPeriodMoment, 'days');
            const elapsedWeeks = Math.floor(elapsedDays / 7);
            const elapsedMonths = Math.floor(grossesseDuration);

            this.grossesseDuration = totalMonths;
            this.pourcentageGrossesse = pourcentageGrossesse;
            this.elapsedMonths = elapsedMonths;
            this.elapsedWeeks = elapsedWeeks;
            this.elapsedDays = elapsedDays;
          }
        }
      })
    </script>
  </body>
</html>
